webpackJsonp([7],{"1alW":function(n,t,e){var a=e("kM2E");a(a.S,"Number",{isInteger:e("AKgy")})},AKgy:function(n,t,e){var a=e("EqjI"),s=Math.floor;n.exports=function(n){return!a(n)&&isFinite(n)&&s(n)===n}},Jbwm:function(n,t,e){var a=e("r4jT");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("58b9b6a0",a,!0,{})},"RRo+":function(n,t,e){n.exports={default:e("c45H"),__esModule:!0}},YR89:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("woOf"),s=e.n(a),o=e("RRo+"),l=e.n(o),r={name:"index",data:function(){return{date:"",status:0,form:{codeNums:0},disabled:!1,currents:{currentPage:1,currentTotal:0},ps:{pageNo:1,pageSize:15},search:"",tableData:[],expData:[],formLabelWidth:"125px",dialogFormVisible:!1,expList:[],rules:{codeNums:[{validator:function(n,t,e){if(!t)return e(new Error("栏目序号不能为空"));setTimeout(function(){l()(t)?t<0?e(new Error("序号必须大于0")):t>=1e3?e(new Error("序号必须小于1000")):e():e(new Error("请输入数字值"))},1e3)},trigger:"blur"}]},tableTitleData:[{label:"ID",prop:"id"},{label:"生成的兑换码",prop:"exchangeCode"},{label:"兑换码状态",prop:"status"},{label:"创建时间",prop:"createTime"}]}},mounted:function(){this.getInfo()},methods:{clear:function(){this.erro=!1,this.checkId=[];this.form=s()(this.form,{codeNums:0}),this.dialogFormVisible=!1},add:function(){this.clear(),this.dialogFormVisible=!0},getInfo:function(n,t){var e=this;n&&t?(n+=" 23:59:59",t+=" 00:00:00"):(n="",t=""),this.$axios("post","/user/exchangeCodeList?pageNo="+this.ps.pageNo+"&pageSize="+this.ps.pageSize+"&status="+this.status+"&start="+t+"&end="+n).then(function(n){"0"===n.code&&(e.tableData=n.data.list,e.currents.currentTotal=n.data.total)})},getExp:function(n,t){var e=this;n&&t?(n+=" 23:59:59",t+=" 00:00:00"):(n="",t=""),this.$axios("post","/user/exp?&status="+this.status+"&start="+t+"&end="+n).then(function(n){"0"===n.code&&(e.expList=n.data,0!==e.expList.length&&e.handleDownloadData())})},handleCurrentChange:function(n){this.ps.pageNo=n,this.getInfo()},handleDownloadData:function(){for(var n=this,t=this.tableTitleData,a=[],s=[],o=0;o<t.length;o++)a[o]=t[o].label,s[o]=t[o].prop;e.e(32).then(function(){var t=e("zWO4").export_json_to_excel,o=a,l=s,r=n.expList;t(o,n.formatJson(l,r),"导出excel列表demo")}.bind(null,e)).catch(e.oe)},formatJson:function(n,t){return t.map(function(t){return n.map(function(n){return t[n]})})},addSumbit:function(){var n=this;this.$refs.form.validate(function(t){if(!t)return!1;n.disabled=!0,n.$axios("post","/user/bacthExchangeCode?codeNums="+n.form.codeNums).then(function(t){"0"===t.code&&(n.disabled=!1,n.getInfo())})})},fromDate:function(n){var t=new Date(n);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}}},i={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"info-table"},[e("div",{staticClass:"fx align-items justify-between mt-15 mb-15 ml-10 mr-10"},[e("div",{staticClass:"fs-18 fw-600"},[n._v("信号源配置")]),n._v(" "),e("div",{staticClass:"fx align-items"},[e("div",{staticClass:"mr-10"},[e("el-button",{attrs:{type:"primary",disabled:n.disabled,size:"small",icon:"el-icon-plus"},on:{click:n.add}},[n._v("批量生成兑换码")])],1),n._v(" "),e("div",[e("el-input",{attrs:{placeholder:"输入兑换码进行搜索",size:"small"},model:{value:n.search,callback:function(t){n.search=t},expression:"search"}},[e("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),n._v(" "),e("div",{staticClass:"ml-10"},[e("el-date-picker",{staticStyle:{width:"250px"},attrs:{size:"small",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:n.date,callback:function(t){n.date=t},expression:"date"}})],1),n._v(" "),e("div",{staticClass:"ml-10 mr-10"},[e("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"small"},model:{value:n.status,callback:function(t){n.status=t},expression:"status"}},[e("el-option",{attrs:{value:0,label:"未兑换"}}),n._v(" "),e("el-option",{attrs:{value:1,label:"已兑换"}})],1)],1),n._v(" "),e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(t){return n.getInfo(n.date[1],n.date[0])}}},[n._v("查询")]),n._v(" "),e("el-button",{staticClass:"ml-10",staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"small",icon:"el-icon-folder-checked"},on:{click:function(t){return n.getExp(n.date[1],n.date[0])}}},[n._v("导出所查询的数据")])],1)]),n._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:n.tableData.filter(function(t){return!n.search||t.exchangeCode.toLowerCase().includes(n.search.toLowerCase())}),"header-cell-class-name":"bg-f5"}},[e("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",align:"center",width:"200"}}),n._v(" "),e("el-table-column",{attrs:{prop:"exchangeCode",label:"生成的兑换码"}}),n._v(" "),e("el-table-column",{attrs:{label:"兑换状态"},scopedSlots:n._u([{key:"default",fn:function(t){return[0===t.row.status?e("span",[n._v("未兑换")]):n._e(),n._v(" "),1===t.row.status?e("span",[n._v("已兑换")]):n._e()]}}])}),n._v(" "),e("el-table-column",{attrs:{width:"300",align:"center",label:"创建时间"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("span",[n._v(n._s(t.row.createTime))])]}}])})],1),n._v(" "),e("el-pagination",{staticClass:"pagination",attrs:{background:"","hide-on-single-page":!0,"current-page":n.currents.currentPage,"page-sizes":[15,20,30],"page-size":15,layout:"total, prev, pager, next, jumper",total:n.currents.currentTotal},on:{"current-change":n.handleCurrentChange}}),n._v(" "),e("el-dialog",{attrs:{title:"批量生成兑换码",visible:n.dialogFormVisible,width:"420px"},on:{"update:visible":function(t){n.dialogFormVisible=t}}},[e("el-form",{ref:"form",attrs:{model:n.form,rules:n.rules}},[e("el-form-item",{attrs:{label:"生成数量","label-width":n.formLabelWidth,prop:"codeNums"}},[e("el-input",{staticStyle:{width:"238px"},attrs:{type:"age",autocomplete:"off"},model:{value:n.form.codeNums,callback:function(t){n.$set(n.form,"codeNums",n._n(t))},expression:"form.codeNums"}})],1)],1),n._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:n.clear}},[n._v("取 消")]),n._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:n.addSumbit}},[n._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=e("VU/8")(r,i,!1,function(n){e("Jbwm")},"data-v-4685a60e",null);t.default=c.exports},c45H:function(n,t,e){e("1alW"),n.exports=e("FeBl").Number.isInteger},r4jT:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});