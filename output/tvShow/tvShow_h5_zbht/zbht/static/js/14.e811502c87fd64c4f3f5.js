webpackJsonp([14],{NOVH:function(n,e,t){var a=t("Y5Y/");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("rjj0")("66829f98",a,!0,{})},OqpS:function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAAEhcmxxAAAABGdBTUEAALGPC/xhBQAAAQVJREFUKBVjYIi5/Z8BCJhABARARYAcGCvmTgCEE3c7BaSGEaww9vZLBkZWDzAbRjCC9SxRhagAiYJUMTDsZoGpAAq4MzAySTMwMHswLFI4j7AFrgLCgBgFE0Q2EiYGpuMeGDLE3jkNYiP8ABL890eegeG/HEgCYfn/39OBrldkWKwqDvcdSAUKAHobYRSKDIgDCxQMCahAzD19oINqGEL/M4NEcJsEdjkodP4pAtXdYeC484oh9gU3poaE+wrgYAT56D9jOgPj/5kMjCw3gZ4QZmD66oDwHdQFDIx/uBj+MzwD+rQYqDAPGMziMCmGv/+2YGqYr3oNqMAQrgiNgRoVaJLYuADPkFNl/SoURwAAAABJRU5ErkJggg=="},PldI:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("woOf"),i=t.n(a),s=t("YgNb"),o={name:"index",data:function(){return{isSysUrl:"1",isPicPath:"2",erroImg:!1,erro:!1,checkAll:!1,dqChannel:0,imgUrl:"",fillUrl:"",currents:{currentPage:1,currentTotal:0},ps:{pageNo:1,pageSize:15},search:"",tableData:[],fileList:[],checkId:[],channelDate:[],form:{adDesc:"",adTitle:"",adType:1,adUrl:"",id:0,picPath:""},formLabelWidth:"100px",dialogFormVisible:!1,isAdd:!1,isCopy:!1,desc:"*图片最大尺寸为宽873px，高373px(否则C端展示可能会变形)",isDelete:!1,multipleSelection:[],rules:{adTitle:[{required:!0,message:"请输入广告名称",trigger:"blur"}],adType:[{required:!0,message:"请选择广告类型",trigger:"change"}],adUrl:[{required:!0,message:"请输入广告路径",trigger:"blur"}]},headers:{token:s.a.get("token")}}},mounted:function(){this.imgUrl=sessionStorage.getItem("domain"),this.fillUrl=sessionStorage.getItem("fillDomain"),this.getInfo(),this.dqChannel=sessionStorage.getItem("channel");var n;for(var e in n=JSON.parse(sessionStorage.getItem("channelList")))this.channelDate.push(n[e])},methods:{handleSelectionChange:function(n){this.multipleSelection=n},handleCheckAllChange:function(n){this.checkId=n?this.channelDate:[]},handleCheckedCitiesChange:function(n){var e=n.length;this.checkAll=e===this.channelDate.length},clear:function(){this.checkId=[],this.checkAll=!1,this.erroImg=!1,this.erro=!1,this.isAdd=!1,this.isCopy=!1,this.isDelete=!1;this.isSysUrl="1",this.isPicPath="2",this.form=i()({adDesc:"",adTitle:"",updateTime:"",adType:1,adUrl:"",id:0}),this.dialogFormVisible=!1,this.fileList=[]},checkDesc:function(n){this.desc=3===n?"*图片尺寸为宽1360px，高120px(否则C端展示可能会变形)":4===n?"*图片尺寸为宽325px，高180px(否则C端展示可能会变形)":"*图片最大尺寸为宽873px，高373px(否则C端展示可能会变形)"},handleChange:function(n,e){this.fileList=e.slice(-1)},handleRemove:function(n,e){console.log(n,e)},picPathBtn:function(n){"1"===n&&(this.fileList=[]),"2"===n&&this.$set(this.form,"picPath","")},select:function(n){"4"===n&&this.$set(this.form,"sysUrl","")},copy:function(){this.clear(),this.isCopy=!0,this.isAdd=!1,this.isDelete=!1,this.dialogFormVisible=!0},add:function(){this.clear(),this.isAdd=!0,this.isCopy=!1,this.isDelete=!1,this.dialogFormVisible=!0},update:function(n){this.isAdd=!1,this.form=i()({},n),this.checkDesc(n.adType),this.dialogFormVisible=!0},deleteSumbit:function(n){var e=this;this.form=i()({},n),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$set(e.form,"deleted",1),e.addImg(),e.updateInfo()}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},getInfo:function(){var n=this,e={pageNum:this.ps.pageNo,pageSize:this.ps.pageSize};this.$axios("post","/ad/getAdList",e).then(function(e){200===e.code&&(n.tableData=e.data.dataList,n.currents.currentTotal=e.data.countSize)})},handleCurrentChange:function(n){this.ps.pageNo=n,this.getInfo()},decryptImage:function(n,e){var t=this,a=new XMLHttpRequest,i=n;a.open("GET",i),a.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),a.responseType="arraybuffer",a.send(),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var n=a.response,i=t.arrayBufferToBase64(n);t.$set(e,"base64List","data:image/jpeg;base64,"+i)}}},arrayBufferToBase64:function(n){for(var e="",t=new Uint8Array(n),a=t.byteLength,i=0;i<a;i++)e+=String.fromCharCode(1^t[i]);return window.btoa(e)},addImg:function(){if(0!==this.fileList.length){for(var n=[],e=0;e<this.fileList.length;e++)n.push(this.fileList[e].response.data);this.$set(this.form,"picPath",n.join(","))}else this.erroImg=!0},addSumbit:function(){var n=this;this.addImg(),this.$refs.form.validate(function(e){if(!e)return console.log("error submit!!"),!1;if(""!==n.form.picPath){n.erroImg=!1,n.$delete(n.form,"id");var t=n.form;n.$axios("post","/ad/addAdInfo",t).then(function(e){200===e.code&&(n.$message({type:"success",message:"新增成功!"}),n.getInfo(),n.clear())})}})},updateInfo:function(){var n=this,e=this.form;this.$axios("post","/ad/editAdInfo",e).then(function(e){200===e.code&&(n.$message({type:"success",message:"操作成功!"}),n.getInfo(),n.clear())})},updateSumbit:function(){var n=this;this.addImg(),this.$refs.form.validate(function(e){if(!e)return console.log("error submit!!"),!1;""!==n.form.picPath&&(n.erroImg=!1,n.updateInfo())})},fromDate:function(n){var e=n.getFullYear(),t=n.getMonth()+1;t=t<10?"0"+t:t;var a=n.getDate();a=a<10?"0"+a:a;var i=n.getHours();i=i<10?"0"+i:i;var s=n.getMinutes();s=s<10?"0"+s:s;var o=n.getSeconds();return e+"-"+t+"-"+a+" "+i+":"+s+":"+(o=o<10?"0"+o:o)}}},r={render:function(){var n=this,e=n.$createElement,a=n._self._c||e;return a("div",{staticClass:"info-table"},[a("div",{staticClass:"fx align-items justify-between mt-15 mb-15 ml-10 mr-10"},[a("div",{staticClass:"fs-18 fw-600"},[n._v("广告管理")]),n._v(" "),a("div",{staticClass:"fx align-items"},[a("div",[a("el-input",{attrs:{placeholder:"输入广告标题进行搜索",size:"small"},model:{value:n.search,callback:function(e){n.search=e},expression:"search"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),n._v(" "),a("div",{staticClass:"ml-10"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:n.add}},[n._v("增加")])],1)])]),n._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:n.tableData.filter(function(e){return!n.search||e.adTitle.toLowerCase().includes(n.search.toLowerCase())}),"header-cell-class-name":"bg-f5"}},[a("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",align:"center",width:"200"}}),n._v(" "),a("el-table-column",{attrs:{label:"广告图片"},scopedSlots:n._u([{key:"default",fn:function(n){return[a("img",{attrs:{src:n.row.picPath,width:"100px",height:"55px"}})]}}])}),n._v(" "),a("el-table-column",{attrs:{prop:"adTitle",label:"广告标题"}}),n._v(" "),a("el-table-column",{attrs:{label:"广告类型",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[1===e.row.adType?a("span",[n._v("APP顶部广告")]):n._e(),n._v(" "),2===e.row.adType?a("span",[n._v("资讯广告")]):n._e(),n._v(" "),3===e.row.adType?a("span",[n._v("pc首页广告")]):n._e(),n._v(" "),4===e.row.adType?a("span",[n._v("官方活动")]):n._e(),n._v(" "),5===e.row.adType?a("span",[n._v("红榜广告")]):n._e()]}}])}),n._v(" "),a("el-table-column",{attrs:{prop:"adDesc",label:"广告描述"}}),n._v(" "),a("el-table-column",{attrs:{prop:"adUrl",label:"跳转路径"}}),n._v(" "),a("el-table-column",{attrs:{label:"修改时间"},scopedSlots:n._u([{key:"default",fn:function(e){return[a("span",[n._v(n._s(e.row.updateTime))])]}}])}),n._v(" "),a("el-table-column",{attrs:{fixed:"right"},scopedSlots:n._u([{key:"default",fn:function(e){return[a("div",{staticClass:"fx cursor"},[a("div",{staticClass:"update w-32 bg-f2",on:{click:function(t){return n.update(e.row)}}},[a("img",{attrs:{src:t("OqpS")}})]),n._v(" "),a("div",{staticClass:"ml-10",on:{click:function(t){return n.deleteSumbit(e.row)}}},[a("img",{attrs:{src:t("lCGE")}})])])]}}])})],1),n._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"","hide-on-single-page":!0,"current-page":n.currents.currentPage,"page-sizes":[15,20,30],"page-size":15,layout:"total, prev, pager, next, jumper",total:n.currents.currentTotal},on:{"current-change":n.handleCurrentChange}}),n._v(" "),a("el-dialog",{attrs:{title:n.isCopy?"复制到所选渠道":"广告管理",visible:n.dialogFormVisible,width:"550px"},on:{"update:visible":function(e){n.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:n.form,rules:n.rules}},[a("el-form-item",{attrs:{label:"广告图片","label-width":n.formLabelWidth}},[a("div",{staticStyle:{color:"red","font-size":"12px"}},[n._v(n._s(n.desc))]),n._v(" "),a("div",[a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://hszhibo.live/sequoiaBack/file/fileUpload","on-remove":n.handleRemove,"on-change":n.handleChange,"file-list":n.fileList,headers:n.headers,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[n._v("点击上传")]),n._v(" "),n.erroImg?a("span",{staticClass:"fs-12 c-red"},[n._v("请上传图片")]):n._e()],1)],1),n._v(" "),""!==n.form.picPath?a("img",{attrs:{src:n.form.picPath,width:"200px"}}):n._e()]),n._v(" "),a("el-form-item",{attrs:{label:"广告标题","label-width":n.formLabelWidth,prop:"adTitle"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{autocomplete:"off"},model:{value:n.form.adTitle,callback:function(e){n.$set(n.form,"adTitle",e)},expression:"form.adTitle"}})],1),n._v(" "),a("el-form-item",{attrs:{label:"广告类型","label-width":n.formLabelWidth,prop:"adType"}},[a("el-radio",{attrs:{label:1},on:{change:function(e){return n.checkDesc(1)}},model:{value:n.form.adType,callback:function(e){n.$set(n.form,"adType",e)},expression:"form.adType"}},[n._v("APP顶部广告")]),n._v(" "),a("el-radio",{attrs:{label:2},on:{change:function(e){return n.checkDesc(2)}},model:{value:n.form.adType,callback:function(e){n.$set(n.form,"adType",e)},expression:"form.adType"}},[n._v("资讯广告")]),n._v(" "),a("el-radio",{attrs:{label:3},on:{change:function(e){return n.checkDesc(3)}},model:{value:n.form.adType,callback:function(e){n.$set(n.form,"adType",e)},expression:"form.adType"}},[n._v("pc首页广告")]),n._v(" "),a("el-radio",{attrs:{label:4},on:{change:function(e){return n.checkDesc(4)}},model:{value:n.form.adType,callback:function(e){n.$set(n.form,"adType",e)},expression:"form.adType"}},[n._v("官方活动")]),n._v(" "),a("el-radio",{attrs:{label:5},on:{change:function(e){return n.checkDesc(5)}},model:{value:n.form.adType,callback:function(e){n.$set(n.form,"adType",e)},expression:"form.adType"}},[n._v("红榜广告")])],1),n._v(" "),a("el-form-item",{attrs:{label:"广告描述","label-width":n.formLabelWidth,prop:"adDesc"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{autocomplete:"off"},model:{value:n.form.adDesc,callback:function(e){n.$set(n.form,"adDesc",e)},expression:"form.adDesc"}})],1),n._v(" "),a("el-form-item",{attrs:{label:"跳转路径","label-width":n.formLabelWidth,prop:"sysUrl"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{autocomplete:"off"},model:{value:n.form.adUrl,callback:function(e){n.$set(n.form,"adUrl",e)},expression:"form.adUrl"}})],1)],1),n._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:n.clear}},[n._v("取 消")]),n._v(" "),n.isAdd?a("el-button",{attrs:{type:"primary"},on:{click:n.addSumbit}},[n._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:n.updateSumbit}},[n._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=t("VU/8")(o,r,!1,function(n){t("NOVH")},"data-v-71554712",null);e.default=l.exports},"Y5Y/":function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},lCGE:function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAYCAYAAAHooR+fAAAABGdBTUEAALGPC/xhBQAAAixJREFUSA21VrlKBEEQne4dUQQDwUATdyM1FQw9PsAjNRT8BxOPRMTE1FTBUMw8PsAj9ANcIw9wQwNFREfHeo011PZ2z0zrbsNu1/HqdVVf0yqi9nl3k6JH66qNKc2G561lY4SujUR/3eMzLEYqub95StNoiC0aCsI41IQhpDIwaEAtIRwqe0PDhrezgyhp3EXoZQPTMY03L422rNKH+lTynV7YDuhKRSeKi3UBYIulg8uCrX9937iymZFGdsLWBEAVcgoBKMwhtwowFDWl1HfsmwYEuwqzSdM01U2zIQGoSxYNvXd2SUIyuWlCMqsQsNwyI+HKxMJJy5A5goIvua9/obYcnNeltVr7JSnejDYL7b9GRalFNTx6Sbv571mAONZqms7N38rgzGgeDr1LDJBcFbncTIAed4BzdWSwDPAROTMB2N5c0H0td1k5I2y4vJZLkhcofc5yAEge6+ZOyCuDiZwTy86y/b/Lwc2pqa2XHdHGmQupOrZgzs7XQ32VNs0W7V6j2+BO6UiCKtmoDI9ul/qadCoR5i31QWJwp3vvdi0a2HeY4qFaUajTH5QIBn+/OjVEPZNzTsLXo93MH5JU0LEBse7tMz/IL3ubZlApS78zU48xKBEPR1vMQUtjjyivfZY/onMbVkoPTiSujtCH/7blVSlHAya0lXrfhpKG4vGw0OZlQTdcaHC78LhdTQ5MiKc4PTBWSJ/AG4HtnegxA8R7TQns4HmFMX4AXlLrAv1GZXoAAAAASUVORK5CYII="}});