webpackJsonp([17],{OqpS:function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAAEhcmxxAAAABGdBTUEAALGPC/xhBQAAAQVJREFUKBVjYIi5/Z8BCJhABARARYAcGCvmTgCEE3c7BaSGEaww9vZLBkZWDzAbRjCC9SxRhagAiYJUMTDsZoGpAAq4MzAySTMwMHswLFI4j7AFrgLCgBgFE0Q2EiYGpuMeGDLE3jkNYiP8ABL890eegeG/HEgCYfn/39OBrldkWKwqDvcdSAUKAHobYRSKDIgDCxQMCahAzD19oINqGEL/M4NEcJsEdjkodP4pAtXdYeC484oh9gU3poaE+wrgYAT56D9jOgPj/5kMjCw3gZ4QZmD66oDwHdQFDIx/uBj+MzwD+rQYqDAPGMziMCmGv/+2YGqYr3oNqMAQrgiNgRoVaJLYuADPkFNl/SoURwAAAABJRU5ErkJggg=="},"R/jI":function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},bWCI:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("woOf"),s=t.n(i),a={name:"index",data:function(){return{currents:{currentPage:1,currentTotal:0},ps:{pageNo:1,pageSize:15},search:"",tableData:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{deleted:0,id:0,menus:[],roleDesc:"",roleName:""},formLabelWidth:"120px",checkAll:!1,checkedCities:[],menuList:[],menuListData:[],isIndeterminate:!0,isAdd:!1,rules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}}},mounted:function(){this.getInfo(),this.getMenu()},methods:{clear:function(){this.form=s()(this.form,{deleted:0,id:0,menus:[],roleDesc:"",roleName:""}),this.dialogFormVisible=!1,this.checkedCities=[]},add:function(){this.clear(),this.isAdd=!0,this.dialogFormVisible=!0},update:function(n,e){var t=this;for(var i in this.checkedCities=[],this.form=s()(this.form,n),n.menus)this.checkedCities.push(n.menus[i]);this.checkedCities.length===this.menuList.length?this.isIndeterminate=!0:this.isIndeterminate=!1,1===e?(this.dialogFormVisible=!0,this.isAdd=!1):this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$set(n,"deleted",1),t.form=s()(t.form,n),t.updateInfo()}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleCheckAllChange:function(n){this.checkedCities=n?this.menuList:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(n){var e=n.length;this.checkAll=e===this.menuList.length,this.isIndeterminate=e>0&&e<this.menuList.length},getMenu:function(){var n=this;this.$axios("post","/sys/menu/list").then(function(e){if(200===e.code){n.menuListData=e.data;for(var t=0;t<e.data.length;t++)n.menuList.push(e.data[t].name)}})},getInfo:function(){var n=this;this.$axios("post","/sys/role/list").then(function(e){200===e.code&&(n.tableData=e.data,n.currents.currentTotal=e.data.total)})},handleCurrentChange:function(n){this.ps.pageNo=n,this.getInfo()},fromInfo:function(){if(this.checkedCities){for(var n={},e=[],t=0;t<this.checkedCities.length;t++)for(var i=0;i<this.menuListData.length;i++)if(this.checkedCities[t]===this.menuListData[i].name){e.push(this.menuListData[i].id);var a=JSON.parse('{"'+this.menuListData[i].id+'":"'+this.menuListData[i].name+'"}');s()(n,a)}this.$set(this.form,"menuId",e.join(",")),this.$set(this.form,"menus",n)}},addSumbit:function(){var n=this;this.fromInfo(),this.$refs.form.validate(function(e){if(!e)return!1;n.$delete(n.form,"id");var t=n.form;n.$axios("post","/sys/role",t).then(function(e){200===e.code&&(n.$message({type:"success",message:"新增成功!"}),n.getInfo(),n.clear())})})},updateInfo:function(){var n=this,e=this.form;this.$axios("post","/sys/role/updateRole",e).then(function(e){200===e.code&&(n.$message({type:"success",message:"操作成功!"}),n.getInfo(),n.form.id===parseInt(sessionStorage.getItem("roleId"))&&location.reload(),n.clear())})},updateSumbit:function(){var n=this;this.fromInfo(),this.$refs.form.validate(function(e){if(!e)return!1;n.updateInfo()})}}},o={render:function(){var n=this,e=n.$createElement,i=n._self._c||e;return i("div",{staticClass:"info-table"},[i("div",{staticClass:"fx align-items justify-between mt-15 mb-15 ml-10 mr-10"},[i("div",{staticClass:"fs-18 fw-600"},[n._v("角色管理")]),n._v(" "),i("div",{staticClass:"fx align-items"},[i("div",[i("el-input",{attrs:{placeholder:"输入角色名称进行搜索",size:"small"},model:{value:n.search,callback:function(e){n.search=e},expression:"search"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),n._v(" "),i("div",{staticClass:"ml-10",on:{click:n.add}},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"}},[n._v("增加")])],1)])]),n._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:n.tableData.filter(function(e){return!n.search||e.roleName.toLowerCase().includes(n.search.toLowerCase())}),"header-cell-class-name":"bg-f5"}},[i("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",align:"center",width:"200"}}),n._v(" "),i("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),n._v(" "),i("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述"}}),n._v(" "),i("el-table-column",{attrs:{label:"角色栏目"},scopedSlots:n._u([{key:"default",fn:function(e){return n._l(e.row.menus,function(e){return i("span",{staticClass:"mr-10"},[n._v(n._s(e))])})}}])}),n._v(" "),i("el-table-column",{attrs:{fixed:"right"},scopedSlots:n._u([{key:"default",fn:function(e){return[i("div",{staticClass:"fx cursor"},[i("div",{staticClass:"update w-32 bg-f2",on:{click:function(t){return n.update(e.row,1)}}},[i("img",{attrs:{src:t("OqpS")}})]),n._v(" "),i("div",{staticClass:"ml-10",on:{click:function(t){return n.update(e.row,2)}}},[i("img",{attrs:{src:t("lCGE")}})])])]}}])})],1),n._v(" "),i("el-pagination",{staticClass:"pagination",attrs:{background:"","hide-on-single-page":!0,"current-page":n.currents.currentPage,"page-sizes":[15,20,30],"page-size":15,layout:"total, prev, pager, next, jumper",total:n.currents.currentTotal},on:{"current-change":n.handleCurrentChange}}),n._v(" "),i("el-dialog",{attrs:{title:"角色管理",visible:n.dialogFormVisible,width:"388px"},on:{"update:visible":function(e){n.dialogFormVisible=e}}},[i("el-form",{ref:"form",attrs:{model:n.form,rules:n.rules}},[i("el-form-item",{attrs:{label:"角色名称","label-width":n.formLabelWidth,prop:"roleName"}},[i("el-input",{staticStyle:{width:"217px"},attrs:{autocomplete:"off"},model:{value:n.form.roleName,callback:function(e){n.$set(n.form,"roleName",e)},expression:"form.roleName"}})],1),n._v(" "),i("el-form-item",{attrs:{label:"角色描述","label-width":n.formLabelWidth,prop:"roleDesc"}},[i("el-input",{staticStyle:{width:"217px"},attrs:{autocomplete:"off"},model:{value:n.form.roleDesc,callback:function(e){n.$set(n.form,"roleDesc",e)},expression:"form.roleDesc"}})],1),n._v(" "),i("el-form-item",{attrs:{label:"可操作栏目","label-width":n.formLabelWidth}},[i("el-checkbox",{attrs:{indeterminate:n.isIndeterminate},on:{change:n.handleCheckAllChange},model:{value:n.checkAll,callback:function(e){n.checkAll=e},expression:"checkAll"}},[n._v("全选")]),n._v(" "),i("el-checkbox-group",{on:{change:n.handleCheckedCitiesChange},model:{value:n.checkedCities,callback:function(e){n.checkedCities=e},expression:"checkedCities"}},n._l(n.menuList,function(e,t){return i("el-checkbox",{key:t,attrs:{label:e}},[n._v(n._s(e))])}),1)],1)],1),n._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:n.clear}},[n._v("取 消")]),n._v(" "),n.isAdd?i("el-button",{attrs:{type:"primary"},on:{click:n.addSumbit}},[n._v("确 定")]):i("el-button",{attrs:{type:"primary"},on:{click:n.updateSumbit}},[n._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=t("VU/8")(a,o,!1,function(n){t("r5YI")},"data-v-317449dd",null);e.default=r.exports},lCGE:function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAYCAYAAAHooR+fAAAABGdBTUEAALGPC/xhBQAAAixJREFUSA21VrlKBEEQne4dUQQDwUATdyM1FQw9PsAjNRT8BxOPRMTE1FTBUMw8PsAj9ANcIw9wQwNFREfHeo011PZ2z0zrbsNu1/HqdVVf0yqi9nl3k6JH66qNKc2G561lY4SujUR/3eMzLEYqub95StNoiC0aCsI41IQhpDIwaEAtIRwqe0PDhrezgyhp3EXoZQPTMY03L422rNKH+lTynV7YDuhKRSeKi3UBYIulg8uCrX9937iymZFGdsLWBEAVcgoBKMwhtwowFDWl1HfsmwYEuwqzSdM01U2zIQGoSxYNvXd2SUIyuWlCMqsQsNwyI+HKxMJJy5A5goIvua9/obYcnNeltVr7JSnejDYL7b9GRalFNTx6Sbv571mAONZqms7N38rgzGgeDr1LDJBcFbncTIAed4BzdWSwDPAROTMB2N5c0H0td1k5I2y4vJZLkhcofc5yAEge6+ZOyCuDiZwTy86y/b/Lwc2pqa2XHdHGmQupOrZgzs7XQ32VNs0W7V6j2+BO6UiCKtmoDI9ul/qadCoR5i31QWJwp3vvdi0a2HeY4qFaUajTH5QIBn+/OjVEPZNzTsLXo93MH5JU0LEBse7tMz/IL3ubZlApS78zU48xKBEPR1vMQUtjjyivfZY/onMbVkoPTiSujtCH/7blVSlHAya0lXrfhpKG4vGw0OZlQTdcaHC78LhdTQ5MiKc4PTBWSJ/AG4HtnegxA8R7TQns4HmFMX4AXlLrAv1GZXoAAAAASUVORK5CYII="},r5YI:function(n,e,t){var i=t("R/jI");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("f506ff08",i,!0,{})}});