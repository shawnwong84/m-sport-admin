webpackJsonp([16],{"2FCL":function(e,t,i){var s=i("txGL");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);i("rjj0")("1e9c4989",s,!0,{})},OqpS:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAAEhcmxxAAAABGdBTUEAALGPC/xhBQAAAQVJREFUKBVjYIi5/Z8BCJhABARARYAcGCvmTgCEE3c7BaSGEaww9vZLBkZWDzAbRjCC9SxRhagAiYJUMTDsZoGpAAq4MzAySTMwMHswLFI4j7AFrgLCgBgFE0Q2EiYGpuMeGDLE3jkNYiP8ABL890eegeG/HEgCYfn/39OBrldkWKwqDvcdSAUKAHobYRSKDIgDCxQMCahAzD19oINqGEL/M4NEcJsEdjkodP4pAtXdYeC484oh9gU3poaE+wrgYAT56D9jOgPj/5kMjCw3gZ4QZmD66oDwHdQFDIx/uBj+MzwD+rQYqDAPGMziMCmGv/+2YGqYr3oNqMAQrgiNgRoVaJLYuADPkFNl/SoURwAAAABJRU5ErkJggg=="},XJpv:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("woOf"),a=i.n(s),l=i("YgNb"),o={name:"index",data:function(){return{checkId:[],fillUrl:"",channelDate:[],channelList:[],checkAll:!1,isDelete:!1,erro:!1,isFile:0,apkUrl:"",isChannel:!1,isDisabled:!1,currents:{currentPage:1,currentTotal:0},ps:{pageNo:1,pageSize:15},search:"",tableData:[],channel:"",form:{adress:"",deleted:0,descr:"",device:1,isForce:0,id:0,channelMap:{},version:""},formLabelWidth:"120px",dialogFormVisible:!1,isAdd:!1,fileList:[],rules:{version:[{required:!0,message:"请输入版本号",trigger:"blur"}],adress:[{required:!0,message:"请输入下载地址",trigger:"blur"}]},headers:{token:l.a.get("token")}}},mounted:function(){this.apkUrl=sessionStorage.getItem("domain"),this.fillUrl=sessionStorage.getItem("fillDomain"),this.getInfo()},methods:{handleCheckAllChange:function(e){this.checkId=e?this.channelDate:[]},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.channelDate.length},download:function(e,t){2===t?window.open(e):window.open(this.apkUrl+e)},handleRemove:function(e,t){console.log(e,t)},handleChange:function(e,t){this.fileList=t.slice(-1)},clear:function(){this.checkId=[],this.checkAll=!1;this.form=a()(this.form,{adress:"",deleted:0,descr:"",device:1,channelMap:{},isForce:0,id:0,version:""}),this.dialogFormVisible=!1,this.date="",this.fileList=[],this.isChannel=!1,this.isDelete=!1,this.isAdd=!1,this.isDisabled=!1},changeDevice:function(e){this.isAdd||(this.isDisabled=2!==e)},add:function(){this.clear(),this.isAdd=!0,this.isDelete=!1,this.dialogFormVisible=!0},deleteSumbit:function(){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$set(e.form,"deleted",1),e.updateInfo()}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},update:function(e,t){this.checkId=[],this.checkId.push(e.channel),this.form=a()(this.form,e),1===t?(this.dialogFormVisible=!0,this.isAdd=!1,this.isChannel=!0,2!==this.form.device||this.isAdd?this.isDisabled=!0:this.isDisabled=!1):this.deleteSumbit()},getInfo:function(){var e=this,t={channel:this.channel,pageNum:this.ps.pageNo,pageSize:this.ps.pageSize};this.$axios("post","/download/list",t).then(function(t){200===t.code&&(e.tableData=t.data.dataList,e.currents.currentTotal=t.data.countSize)})},handleCurrentChange:function(e){this.ps.pageNo=e,this.getInfo()},addFile:function(){if(0!==this.fileList.length){for(var e=[],t=0;t<this.fileList.length;t++)e.push(this.fileList[t].response.data);this.$set(this.form,"adress",e.join(","))}},addSumbit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;if(e.addFile(),""===e.form.adress)e.erro=!0;else{e.erro=!1,e.$delete(e.form,"id");var i=e.form;e.$axios("post","/download/save",i).then(function(t){200===t.code?(e.$message({type:"success",message:"新增成功!"}),e.getInfo(),e.clear()):e.$message({type:"warning",message:t.msg})})}})},updateInfo:function(){var e=this;this.addFile();var t=this.form;this.$axios("post","/download/updateDownLoad",t).then(function(t){200===t.code?(e.$message({type:"success",message:"操作成功!"}),e.getInfo(),e.clear()):e.$message({type:"warning",message:t.msg})})},updateSumbit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.updateInfo()})}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"info-table"},[s("div",{staticClass:"fx align-items justify-between mt-15 mb-15 ml-10 mr-10"},[s("div",{staticClass:"fs-18 fw-600"},[e._v("下载管理")]),e._v(" "),s("div",{staticClass:"fx align-items"},[s("div",[s("el-input",{attrs:{placeholder:"输入版本号进行搜索",size:"small"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),s("div",{staticClass:"ml-10",on:{click:function(t){return e.getInfo(1)}}},[s("el-button",{staticClass:"el-icon-search",attrs:{type:"primary",size:"small"}},[e._v("查询")])],1),e._v(" "),s("div",{staticClass:"ml-10",on:{click:e.add}},[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"}},[e._v("增加")])],1)])]),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.filter(function(t){return!e.search||t.version.toLowerCase().includes(e.search.toLowerCase())}),"header-cell-class-name":"bg-f5"}},[s("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",align:"center",width:"200"}}),e._v(" "),s("el-table-column",{attrs:{label:"设备"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.device?s("span",{staticClass:"c-green"},[e._v("Android")]):e._e(),e._v(" "),2===t.row.device?s("span",{staticClass:"c-red"},[e._v("ios")]):e._e(),e._v(" "),3===t.row.device?s("span",{staticClass:"c-red"},[e._v("其他系统")]):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"channelName",label:"推广组名称"}}),e._v(" "),s("el-table-column",{attrs:{label:"推广唯一码"},scopedSlots:e._u([{key:"default",fn:function(t){return[null===t.row.channel?s("span",[e._v("全部渠道")]):e._e(),e._v(" "),t.row.channel?s("span",[e._v(e._s(t.row.channel))]):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"descr",width:"250px",align:"center",label:"描述"}}),e._v(" "),s("el-table-column",{attrs:{prop:"version",label:"版本"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"是否强制更新"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.isForce?s("span",{staticClass:"c-green"},[e._v("是")]):e._e(),e._v(" "),0===t.row.isForce?s("span",{staticClass:"c-red"},[e._v("否")]):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"shareAdress",align:"center",width:"250px",label:"h5推广地址"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",width:"250px",label:"下载地址"},scopedSlots:e._u([{key:"default",fn:function(t){return""!==t.row.adress?[s("span",[e._v(e._s(t.row.adress))])]:void 0}}],null,!0)}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"点击下载"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticClass:" down-btn el-icon-download",on:{click:function(i){return e.download(t.row.adress,t.row.device)}}})]}}])}),e._v(" "),s("el-table-column",{attrs:{fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"fx cursor"},[s("div",{staticClass:"update w-32 bg-f2",on:{click:function(i){return e.update(t.row,1)}}},[s("img",{attrs:{src:i("OqpS")}})]),e._v(" "),s("div",{staticClass:"ml-10",on:{click:function(i){return e.update(t.row,2)}}},[s("img",{attrs:{src:i("lCGE")}})])])]}}])})],1),e._v(" "),s("el-pagination",{staticClass:"pagination",attrs:{background:"","hide-on-single-page":!0,"current-page":e.currents.currentPage,"page-sizes":[15,20,30],"page-size":15,layout:"total, prev, pager, next, jumper",total:e.currents.currentTotal},on:{"current-change":e.handleCurrentChange}}),e._v(" "),s("el-dialog",{attrs:{title:"下载管理管理",visible:e.dialogFormVisible,width:"400px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[s("el-form-item",{attrs:{label:"设备","label-width":e.formLabelWidth,prop:"device"}},[s("el-radio",{attrs:{label:1},on:{change:function(t){return e.changeDevice(1)}},model:{value:e.form.device,callback:function(t){e.$set(e.form,"device",t)},expression:"form.device"}},[e._v("Android")]),e._v(" "),s("el-radio",{attrs:{label:2},on:{change:function(t){return e.changeDevice(2)}},model:{value:e.form.device,callback:function(t){e.$set(e.form,"device",t)},expression:"form.device"}},[e._v("ios")]),e._v(" "),s("el-radio",{attrs:{label:3},on:{change:function(t){return e.changeDevice(3)}},model:{value:e.form.device,callback:function(t){e.$set(e.form,"device",t)},expression:"form.device"}},[e._v("其他系统")])],1),e._v(" "),s("el-form-item",{attrs:{label:"版本","label-width":e.formLabelWidth,prop:"version"}},[s("el-input",{staticStyle:{width:"238px"},attrs:{autocomplete:"off"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"是否强制更新","label-width":e.formLabelWidth,prop:"isForce"}},[s("el-radio",{attrs:{label:0},model:{value:e.form.isForce,callback:function(t){e.$set(e.form,"isForce",t)},expression:"form.isForce"}},[e._v("否")]),e._v(" "),s("el-radio",{attrs:{label:1},model:{value:e.form.isForce,callback:function(t){e.$set(e.form,"isForce",t)},expression:"form.isForce"}},[e._v("是")])],1),e._v(" "),s("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth,prop:"descr"}},[s("el-input",{staticStyle:{width:"238px","margin-right":"10px"},attrs:{autocomplete:"off"},model:{value:e.form.descr,callback:function(t){e.$set(e.form,"descr",t)},expression:"form.descr"}})],1),e._v(" "),2!==e.form.device&&e.isAdd?s("el-form-item",{attrs:{label:"请选择","label-width":e.formLabelWidth}},[s("el-radio",{attrs:{label:1},model:{value:e.isFile,callback:function(t){e.isFile=t},expression:"isFile"}},[e._v("上传app包")]),e._v(" "),s("el-radio",{attrs:{label:2},model:{value:e.isFile,callback:function(t){e.isFile=t},expression:"isFile"}},[e._v("输入app包地址")])],1):e._e(),e._v(" "),2!==e.form.device&&1===e.isFile&&e.isAdd?s("el-form-item",{attrs:{label:"上传app包","label-width":e.formLabelWidth}},[s("el-upload",{staticClass:"upload-demo",attrs:{action:"/sequoiaBack/file/fileUploadApk",headers:e.headers,"on-remove":e.handleRemove,"on-change":e.handleChange,"file-list":e.fileList}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),e.erro?s("span",{staticClass:"fs-12 c-red"},[e._v("请上传app包")]):e._e()],1)],1):e._e(),e._v(" "),(2===e.form.device||2===e.isFile)&&e.isAdd||!e.isAdd&&!e.isDelete?s("el-form-item",{attrs:{label:"下载地址","label-width":e.formLabelWidth,prop:"adress"}},[s("el-input",{staticStyle:{width:"238px","margin-right":"10px"},attrs:{type:"textarea",rows:4,disabled:e.isChannel,autocomplete:"off"},model:{value:e.form.adress,callback:function(t){e.$set(e.form,"adress",t)},expression:"form.adress"}})],1):e._e()],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.clear}},[e._v("取 消")]),e._v(" "),e.isAdd?s("el-button",{attrs:{type:"primary"},on:{click:e.addSumbit}},[e._v("确 定")]):e._e(),e._v(" "),e.isAdd||e.isDelete?e._e():s("el-button",{attrs:{type:"primary"},on:{click:e.updateSumbit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=i("VU/8")(o,n,!1,function(e){i("2FCL")},"data-v-3384c8c1",null);t.default=r.exports},lCGE:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAYCAYAAAHooR+fAAAABGdBTUEAALGPC/xhBQAAAixJREFUSA21VrlKBEEQne4dUQQDwUATdyM1FQw9PsAjNRT8BxOPRMTE1FTBUMw8PsAj9ANcIw9wQwNFREfHeo011PZ2z0zrbsNu1/HqdVVf0yqi9nl3k6JH66qNKc2G561lY4SujUR/3eMzLEYqub95StNoiC0aCsI41IQhpDIwaEAtIRwqe0PDhrezgyhp3EXoZQPTMY03L422rNKH+lTynV7YDuhKRSeKi3UBYIulg8uCrX9937iymZFGdsLWBEAVcgoBKMwhtwowFDWl1HfsmwYEuwqzSdM01U2zIQGoSxYNvXd2SUIyuWlCMqsQsNwyI+HKxMJJy5A5goIvua9/obYcnNeltVr7JSnejDYL7b9GRalFNTx6Sbv571mAONZqms7N38rgzGgeDr1LDJBcFbncTIAed4BzdWSwDPAROTMB2N5c0H0td1k5I2y4vJZLkhcofc5yAEge6+ZOyCuDiZwTy86y/b/Lwc2pqa2XHdHGmQupOrZgzs7XQ32VNs0W7V6j2+BO6UiCKtmoDI9ul/qadCoR5i31QWJwp3vvdi0a2HeY4qFaUajTH5QIBn+/OjVEPZNzTsLXo93MH5JU0LEBse7tMz/IL3ubZlApS78zU48xKBEPR1vMQUtjjyivfZY/onMbVkoPTiSujtCH/7blVSlHAya0lXrfhpKG4vGw0OZlQTdcaHC78LhdTQ5MiKc4PTBWSJ/AG4HtnegxA8R7TQns4HmFMX4AXlLrAv1GZXoAAAAASUVORK5CYII="},txGL:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.down-btn[data-v-3384c8c1]{\n  border: 1px solid #005cdb;\n  color:#005cdb ;\n  border-radius: 4px;\n  padding: 5px;\n}\n",""])}});